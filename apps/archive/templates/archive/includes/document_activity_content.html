{% load static %}
{% load date_filters %}

<div class="timeline timeline-one-side" data-timeline-content="axis" data-timeline-axis-style="dashed">
    {% for activity in activities %}
    <div class="timeline-block">
        <span class="timeline-step badge-default">
            <i class="fa-solid fa-user"></i>
        </span>
        <div class="timeline-content">
            <p class="text-sm text-gray-dark lh-130 mb-0">
                {{ activity.user.full_name|default:'username' }}
                {{ activity.get_action_type_display|lower }} dokumen
            </p>
            <p class="text-xs text-gray-dark lh-160 mb-0">
                {% now "Y" as current_year %}
                {% if activity.created_at.year|stringformat:"s" == current_year %}
                    {{ activity.created_at|indo_date:'short_medium_time' }} 
                {% else %}
                    {{ activity.created_at|indo_date:'datetime' }}
                {% endif %}
            </p>
        </div>
    </div>
    {% empty %}
    <div class="text-center py-4">
        <i class="fa-solid fa-clock fa-2x text-muted mb-2"></i>
        <p class="text-muted">Belum ada aktivitas</p>
    </div>
    {% endfor %}
</div>

{% if activities|length >= 20 %}
<div class="text-center mt-3">
    <small class="text-muted">Menampilkan 20 aktivitas terakhir</small>
</div>
{% endif %}